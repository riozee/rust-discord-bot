# 🤖 rust-bot 開発のやり方

開発に協力してくれるみんなへ！ 🎉

このドキュメントは、開発の進め方とか、テスト用の Bot を作る方法とかをまとめたものです。

---

## 🛠️ まずは準備から

### 1\. Rust のインストール

まだの人は、下のコマンドをターミナルにコピペして Rust を入れといてね。

### 2\. リポジトリのクローン

まずはこのリポジトリを自分の PC に持ってこよう。

```bash
git clone https://github.com/your-username/my-discord-bot.git
cd my-discord-bot
```

### 3\. 依存関係のインストール

下のコマンドを叩けば、必要なライブラリとかが全部インストールされるよ。

```bash
cargo build
```

---

## 💻 開発の基本的な流れ

### 1\. ブランチを作る

作業する前に、必ず新しいブランチを作ってね！ `main`ブランチはいつでもちゃんと動く状態にしときたいから、直接いじるのはやめよう 🙅

```bash
# 最新の状態にする
git checkout main
git pull origin main

# 新しいブランチを作成（ブランチ名は分かりやすく！）
git checkout -b feature/〇〇機能の追加
```

### 2\. コーディング！

作ったブランチで、自由にコードを書いて機能を追加したり、バグを直したりして OK！

### 3\. 動作テスト（超重要！）

コードを変えたら、**コミットする前に必ず自分の PC でテストしてね。**
やり方は一番下に書いてある「**🔧 テスト用の Bot を作る方法**」を見て！

### 4\. コミット & プッシュ

ちゃんと動くことが確認できたら、変更をコミットして GitHub にプッシュしよう。

```bash
git add .
git commit -m "feat: 〇〇機能を追加したよ！" # コミットメッセージは分かりやすく
git push origin feature/〇〇機能の追加
```

### 5\. プルリクエスト (PR) を作成

GitHub で、さっきプッシュしたブランチから`main`ブランチへのプルリクエスト（PR）を作ってね。

PR のコメントには、こんなことを書くとレビューする人が助かります

- **何を変えたか？**
- **なんで変えたか？**
- **（もしあれば）動作確認のスクショや GIF**

PR くれたら誰かが見て、問題なさそうならマージしてボットを更新するよ！👍

---

## 🔧 テスト用の Bot を作る方法

本番の Bot に影響が出ないように、開発中は自分専用のテスト Bot を使おう！

1.  **Discord Developer Portal を開く**

    - [Discord Developer Portal](https://www.google.com/search?q=https://discord.com/developers/applications) にアクセスして「**New Application**」をクリック。
    - Bot の名前は適当で OK（例: `test-bot-自分の名前`）。

2.  **Bot を作ってトークンをコピー**

    - 左のメニューから「**Bot**」タブを選んで「**Add Bot**」をクリック。
    - 「**TOKEN**」のところにある「**Reset Token**」か「**View Token**」を押して、表示されたトークンをコピー。**このトークンはパスワードみたいなものだから、絶対に人に教えたり、GitHub に上げたりしちゃダメだよ！** 🤫

3.  **メッセージが読めるように設定**

    - 「**Privileged Gateway Intents**」っていう項目の中にある「**MESSAGE CONTENT INTENT**」をオンにする。これを忘れるとメッセージが読めないから注意！

4.  **自分のサーバーに Bot を招待**

    - 左のメニューの「**OAuth2**」→「**URL Generator**」を開く。
    - 「**SCOPES**」で「`bot`」にチェックを入れる。
    - 「**BOT PERMISSIONS**」で必要な権限（とりあえず`Send Messages`とか`Read Message History`で OK）を選ぶ。
    - 下に表示された URL をコピーしてブラウザで開き、テストしたいサーバーに招待しよう。

5.  **`.env`ファイルを作る**

    - プロジェクトのフォルダ直下に `.env` という名前のファイルを作る。
    - そのファイルの中に、さっきコピーした Bot のトークンを貼り付ける。

    <!-- end list -->

    ```env
    # .env
    DISCORD_TOKEN="ここにさっきコピーしたトークンを貼り付け"
    ```

6.  **Bot を起動！**

    - ターミナルで下のコマンドを叩けば、君の PC で Bot が動き出すよ！

    <!-- end list -->

    ```bash
    cargo run
    ```

    - サーバーに招待したテスト Bot がちゃんと動くか確認してみよう！
